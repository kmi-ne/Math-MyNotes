\chapter{Class algebra}

\section{Class}


\begin{dfn}[][][$x$ is a set/proper class]
  \begin{thmlist}
    \item \mylabel{dfn_M}
    \?
      \M{x}
      \defn
      âˆƒ u \ (x âˆˆ u)
    \?
    \item \mylabel{dfn_Pr}
    \?
      \Pr{x}
      \defn
      Â¬ \M{x}
    \?
  \end{thmlist}
\end{dfn}


\begin{axm}[axm_ext][][Axiom of Extensionality]
  \[
    âˆ€ u \ (u âˆˆ x \lra u âˆˆ y) \ra x = y
  \]
\end{axm}


\begin{dfn}[][][$x$ is a subclass/proper subclass of $y$]
  \begin{thmlist}
    \item \mylabel{dfn_sbc}
    \?
      x âŠ† y
      \defn
      âˆ€ u \ (u âˆˆ x \ra u âˆˆ y)
    \?
    \item
    \?
      x âŠ‚ y \mylabel{dfn_psbc}
      \defn
      x âŠ† y â‰  x
    \?
  \end{thmlist}
\end{dfn}


\begin{prp}
  \begin{thmlist}
    \item
    \?
      x âŠ† x
    \?
    \item \mylabel{thm_sbc_tr}
    \?
      x âŠ† y âŠ† z \ra x âŠ† z
    \?
    \item \mylabel{thm_sbc_atsy}
    \?
      x âŠ† y âŠ† x \ra x = y
    \?
  \end{thmlist}
  \tcblower
  \begin{thmlist}
    \item By $âˆ€ u \ (u âˆˆ x \ra u âˆˆ x)$ and \cref{dfn_sbc}.
    \item Assume \rx{(A1) $x âŠ† y âŠ† z$}.\\
    By \cref{dfn_sbc} and (A1), $âˆ€ u \ (u âˆˆ x \ra u âˆˆ y)$ and $âˆ€ u \ (u âˆˆ y \ra u âˆˆ z)$. Thus, $âˆ€ u \ (u âˆˆ x \ra u âˆˆ z)$.\\
    Thus, by \cref{dfn_sbc}, $x âŠ† z$.
    \Release{A1}
    \item Assume \rx{(A1) $x âŠ† y âŠ† x$}.\\
    By \cref{dfn_sbc} and (A1), $âˆ€ u \ (u âˆˆ x \ra u âˆˆ y)$ and $âˆ€ u \ (u âˆˆ y \ra u âˆˆ x)$. Thus, $âˆ€ u \ (u âˆˆ x \lra u âˆˆ y)$.\\
    Thus, by \nameref{axm_ext}, $x = y$.
    \Release{A1}
  \end{thmlist}
\end{prp}


\begin{prp}
  \begin{thmlist}
    \item
    \?
      Â¬ (x âŠ‚ x)
    \?
    \item \mylabel{thm_psbc_nin}
    \?
      x âŠ‚ y \lra
      \cuc{
        x âŠ† y \\
        âˆƒ u \ (u âˆˆ y âˆ§ u âˆ‰ x)
      }
    \?
    \item \mylabel{thm_psbcsbc_tr}
    \?
      x âŠ‚ y âŠ† z \ra x âŠ‚ z
    \?
    \item
    \?
      x âŠ‚ y âŠ‚ z \ra x âŠ‚ z
    \?
    \item
    \?
      x âŠ‚ y âŠ‚ z \ra x âŠ‚ z
    \?
    \item
    \?
      x âŠ† y \lra (x âŠ‚ y âˆ¨ x = y)
    \?
  \end{thmlist}
  \tcblower
  \begin{thmlist}
    \item By $x = x$ and \cref{dfn_psbc}.
    \item
    \begin{description}
      \item[($\la$)] Assume \rx{(A1) $x âŠ† y$} and \rx{(A2) $âˆƒ u \ (u âˆˆ y âˆ§ u âˆ‰ x)$}.\\
      By (A2), $x â‰  y$. Thus, by (A1) and \cref{dfn_psbc}, $x âŠ‚ y$.
      \Release{A1, A2}
      \item[($\ra$)] Assume \rx{(A1) $x âŠ‚ y$}.\\
      By (A1) and \cref{dfn_psbc}, $x âŠ† y$ and $x â‰  y$.\\
      Thus, by \cref{thm_sbc_tr}, $Â¬ (y âŠ† x)$. Thus, by \cref{dfn_sbc}, $âˆƒ u \ (u âˆˆ y âˆ§ u âˆ‰ x)$.
      \Release{A1}
    \end{description}
    \item Assume \rx{(A1) $x âŠ‚ y âŠ† z$}.
    \begin{step}
      \item By (A1) and \cref{dfn_psbc}, $x âŠ† y âŠ† z$. Thus, by \cref{thm_sbc_tr}, $x âŠ† z$.
      \item By (A1) and \cref{thm_psbc_nin}, $âˆƒ u \ (u âˆˆ y âˆ§ u âˆ‰ x)$. Take such $u$.\\
      By (A1) and \cref{dfn_sbc}, $u âˆˆ y \ra u âˆˆ z$. Thus, $u âˆˆ z âˆ§ u âˆ‰ x$. Thus, $âˆƒ u \ (u âˆˆ z âˆ§ u âˆ‰ x)$.
    \end{step}
    Thus, by \cref{thm_psbc_nin}, $x âŠ‚ z$.
    \Release{A1}
    \item Assume \rx{(A1) $x âŠ† y âŠ‚ z$}.
    \begin{step}
      \item By (A1) and \cref{dfn_psbc}, $x âŠ† y âŠ† z$. Thus, by \cref{thm_sbc_tr}, $x âŠ† z$.
      \item By (A1) and \cref{thm_psbc_nin}, $âˆƒ u \ (u âˆˆ z âˆ§ u âˆ‰ y)$. Take such $u$.\\
      By (A1) and \cref{dfn_sbc}, $u âˆˆ x \ra u âˆˆ y$. Thus, $u âˆˆ z âˆ§ u âˆ‰ x$. Thus, $âˆƒ u \ (u âˆˆ z âˆ§ u âˆ‰ x)$.
    \end{step}
    Thus, by \cref{thm_psbc_nin}, $x âŠ‚ z$.
    \Release{A1}
    \item By \cref{dfn_psbc}, $x âŠ‚ y âŠ‚ z \ra x âŠ† y âŠ‚ z$. Thus, by \cref{thm_psbcsbc_tr}, $x âŠ‚ z$.
  \end{thmlist}
\end{prp}


\begin{axm}[axm_comp][][Axiom of Comprehension]
  ($x$ is not free in NBG-formula $ğœ™$)
  \[
    âˆƒ x \ âˆ€ u \ (u âˆˆ x \lra ğœ™ âˆ§ \M{u})
  \]
\end{axm}


\begin{thm}
  ($x$ is not free in NBG-formula $ğœ™$)
  \[
    âˆƒ! x \ âˆ€ u \ (u âˆˆ x \lra ğœ™ âˆ§ \M{u})
  \]
  \tcblower
  \begin{description}
    \item[Existence] By \nameref{axm_comp}.
    \item[Uniqueness] Assume \rx{(A1) $âˆ€ u \ (u âˆˆ x_ğŸ \lra ğœ™ âˆ§ \M{u})$ and $âˆ€ u \ (u âˆˆ x_ğŸ \lra ğœ™ âˆ§ \M{u})$}.\\
    By (A1), $âˆ€ u \ (u âˆˆ x_ğŸ \lra u âˆˆ x_ğŸ)$. Thus, by \nameref{axm_ext}, $x_ğŸ = x_ğŸ$.
    \Release{A1}
  \end{description}
\end{thm}


\begin{nb}
  æœ¬æ¥ã¯ã“ã“ã«$\cls{u}{ğœ™}$ã®å®šç¾©ãªã©ãŒå…¥ã‚‹ãŒçœç•¥ï¼
  \[
    v âˆˆ \cls{u}{ğœ™} \lra ğœ™ [v/u] âˆ§ \M{v}
  \]
  \[
    (ğœ™ \ra ğœ“) \ra \cls{u}{ğœ™} âŠ† \cls{u}{ğœ“}
  \]
  \[
    (ğœ™ \lra ğœ“) \ra \cls{u}{ğœ™} = \cls{u}{ğœ“}
  \]
  \begin{eqalign}
    \cls{u}{u âˆˆ \cls{v}{ğœ™}}
    &{}= \cls{u}{ğœ™ [u/v]}
  \end{eqalign}
  \begin{eqalign}
    \cls{u}{u âˆ‰ \cls{v}{ğœ™}}
    &{}= \cls{u}{Â¬ ğœ™ [u/v]}
  \end{eqalign}
  \[
    x = \cls{u}{u âˆˆ x}
  \]
\end{nb}


\begin{dfn}
  \begin{thmlist}
    \item \mylabel{dfn_emp}
    \?
      âˆ…
      â‰”
      \cls{u}{u â‰  u}
    \?
    \item \mylabel{dfn_univ}
    \?
      ğ”
      â‰”
      \cls{u}{u = u}
    \?
    \item \mylabel{dfn_russ}
    \?
      ğ‘ğ®
      â‰”
      \cls{u}{u âˆ‰ u}
    \?
  \end{thmlist}
\end{dfn}


\begin{nb}
  \begin{eqgather}
    u âˆˆ âˆ… \lra u â‰  u âˆ§ \M{u} \\
    u âˆˆ ğ” \lra u = u âˆ§ \M{u} \\
    u âˆˆ ğ‘ğ® \lra u âˆ‰ u âˆ§ \M{u}
  \end{eqgather}
\end{nb}


\begin{prp}
  \begin{thmlist}
    \item \mylabel{thm_emp_nin}
    \?
      u âˆ‰ âˆ…
    \?
    \item \mylabel{thm_M_in_univ}
    \?
      \M{u} \ra u âˆˆ ğ”
    \?
    \item
    \?
      âˆ… âŠ† x
    \?
    \item
    \?
      x âŠ† ğ”
    \?
    \item
    \?
      \Pr{ğ‘ğ®}
    \?
  \end{thmlist}
  \tcblower
  \begin{thmlist}
    \item By $u âˆˆ âˆ… \lra u â‰  u âˆ§ \M{u}$.
    \item By $u âˆˆ ğ” \lra u = u âˆ§ \M{u}$.
    \item By \cref{thm_emp_nin}, $âˆ€ u \ (u âˆˆ âˆ… \ra u âˆˆ x)$. Thus, by \cref{dfn_sbc}, $âˆ… âŠ† x$.
    \item By \cref{dfn_M}, $u âˆˆ x \ra \M{u}$. Thus, by \cref{thm_M_in_univ}, $u âˆˆ x \ra u âˆˆ ğ”$. Thus, $âˆ€ u \ (u âˆˆ x \ra u âˆˆ ğ”)$. Thus, by \cref{dfn_sbc}, $x âŠ† ğ”$.
    \item By $ğ‘ğ® âˆˆ ğ‘ğ® \lra ğ‘ğ® âˆ‰ ğ‘ğ® âˆ§ \M{ğ‘ğ®}$, $ğ‘ğ® âˆ‰ ğ‘ğ® \lra Â¬ (ğ‘ğ® âˆ‰ ğ‘ğ® âˆ§ \M{ğ‘ğ®})$. Thus, $Â¬ \M{ğ‘ğ®}$. Thus, by \cref{dfn_Pr}, $\Pr{ğ‘ğ®}$.
  \end{thmlist}
\end{prp}


\section{Class algebra}


\begin{dfn}
  \begin{thmlist}
    \item \mylabel{dfn_cup}
    \?
      x âˆª y
      â‰”
      \cls{u}{u âˆˆ x âˆ¨ u âˆˆ y}
    \?
    \item \mylabel{dfn_cap}
    \?
      x âˆ© y
      â‰”
      \cls{u}{u âˆˆ x âˆ§ u âˆˆ y}
    \?
    \item \mylabel{dfn_cdif}
    \?
      x âˆ– y
      â‰”
      \cls{u}{u âˆˆ x âˆ§ u âˆ‰ y}
    \?
    \item \mylabel{dfn_cmpl}
    \?
      x^âˆ
      â‰”
      \cls{u}{u âˆ‰ x}
    \?
  \end{thmlist}
\end{dfn}


\begin{prp}
  \begin{thmlist}
    \item
    \?
      x âˆª y = y âˆª x
    \?
    \item
    \?
      x âˆ© y = y âˆ© x
    \?
    \item
    \?
      (x âˆª y) âˆª z = x âˆª (y âˆª z)
    \?
    \item
    \?
      (x âˆ© y) âˆ© z = x âˆ© (y âˆ© z)
    \?
    \item
    \?
      x âˆ© (y âˆª z) = (x âˆ© y) âˆª (x âˆ© z)
    \?
    \item
    \?
      x âˆª (y âˆ© z) = (x âˆª y) âˆ© (x âˆª z)
    \?
    \item
    \?
      x âˆª x = x
    \?
    \item
    \?
      x âˆ© x = x
    \?
    \item \mylabel{thm_cup_sbc}
    \?
      x âŠ† x âˆª y
    \?
    \item \mylabel{thm_cap_sbc}
    \?
      x âˆ© y âŠ† x
    \?
    \item
    \?
      x âŠ† y \lra x âˆª y = y
    \?
    \item
    \?
      x âŠ† y \lra x âˆ© y = x
    \?
  \end{thmlist}
  \tcblower
  \begin{thmlist}
    \item
    \?
      x âˆª y
      &{}= \cls{u}{u âˆˆ x âˆ¨ u âˆˆ y} \\
      &{}= \cls{u}{u âˆˆ y âˆ¨ u âˆˆ x}\\
      &{}= y âˆª x
    \?
    \item
    \?
      x âˆ© y
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ y} \\
      &{}= \cls{u}{u âˆˆ y âˆ§ u âˆˆ x}\\
      &{}= y âˆ© x
    \?
    \item
    \?
      (x âˆª y) âˆª z
      &{}= \cls{u}{u âˆˆ x âˆª y âˆ¨ u âˆˆ z} \\
      &{}= \cls{u}{u âˆˆ x âˆ¨ u âˆˆ y âˆ¨ u âˆˆ z} \\
      &{}= \cls{u}{u âˆˆ x âˆ¨ u âˆˆ y âˆª z}
    \?
    \item
    \?
      (x âˆ© y) âˆ© z
      &{}= \cls{u}{u âˆˆ x âˆ© y âˆ§ u âˆˆ z} \\
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ y âˆ§ u âˆˆ z} \\
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ y âˆ© z}
    \?
    \item
    \?
      x âˆ© (y âˆª z)
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ y âˆª z} \\
      &{}= \cls{u}{u âˆˆ x âˆ§ (u âˆˆ y âˆ¨ u âˆˆ z)} \\
      &{}= \cls{u}{(u âˆˆ x âˆ§ u âˆˆ y) âˆ¨ (u âˆˆ x âˆ§ u âˆˆ z) } \\
      &{}= \cls{u}{u âˆˆ x âˆ© y âˆ¨ u âˆˆ x âˆ© z} \\
      &{}= (x âˆ© y) âˆª (x âˆ© z)
    \?
    \item
    \?
      x âˆª (y âˆ© z)
      &{}= \cls{u}{u âˆˆ x âˆ¨ u âˆˆ y âˆ© z} \\
      &{}= \cls{u}{u âˆˆ x âˆ¨ (u âˆˆ y âˆ§ u âˆˆ z)} \\
      &{}= \cls{u}{(u âˆˆ x âˆ¨ u âˆˆ y) âˆ§ (u âˆˆ x âˆ¨ u âˆˆ z) } \\
      &{}= \cls{u}{u âˆˆ x âˆª y âˆ§ u âˆˆ x âˆª z} \\
      &{}= (x âˆª y) âˆ© (x âˆª z)
    \?
    \item
    \?
      x âˆª x
      &{}= \cls{u}{u âˆˆ x âˆ¨ u âˆˆ x} \\
      &{}= \cls{u}{u âˆˆ x} \\
      &{}= x
    \?
    \item
    \?
      x âˆ© x
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ x} \\
      &{}= \cls{u}{u âˆˆ x} \\
      &{}= x
    \?
    \item
    \?
      x
      &{}= \cls{u}{u âˆˆ x} \\
      &{}âŠ† \cls{u}{u âˆˆ x âˆ¨ u âˆˆ y} \\
      &{}= x âˆª y
    \?
    \item
    \?
      x âˆ© y
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ y} \\
      &{}âŠ† \cls{u}{u âˆˆ x} \\
      &{}= x
    \?
    \item
    \begin{description}
      \item[($\la$)] Assume \rx{(A1) $x âˆª y = y$}.
      \begin{eqalign}
        x
        &{}âŠ† x âˆª y \quad \text{by \cref{thm_cup_sbc}} \\
        &{}= y \quad \text{by (A1)}
      \end{eqalign}
      \Release{A1}
      \item[($\ra$)] Assume \rx{(A1) $x âŠ† y$}.\\
      By (A1), $u âˆˆ x \ra u âˆˆ y$. Thus,
      \begin{eqalign}
        x âˆª y
        &{}= \cls{u}{u âˆˆ x âˆ¨ u âˆˆ y} \\
        &{}= \cls{u}{u âˆˆ y} \\
        &{}= y
      \end{eqalign}
      \Release{(A1)}
    \end{description}
    \item
    \begin{description}
      \item[($\la$)] Assume \rx{(A1) $x âˆ© y = x$}.
      \begin{eqalign}
        x
        &{}= x âˆ© y \quad \text{by (A1)} \\
        &{}âŠ† y \quad \text{by \cref{thm_cap_sbc}}
      \end{eqalign}
      \Release{A1}
      \item[($\ra$)] Assume \rx{(A1) $x âŠ† y$}.\\
      By (A1), $u âˆˆ x \ra u âˆˆ y$. Thus,
      \begin{eqalign}
        x âˆ© y
        &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ y} \\
        &{}= \cls{u}{u âˆˆ x} \\
        &{}= x
      \end{eqalign}
      \Release{A1}
    \end{description}
  \end{thmlist}
\end{prp}


\begin{prp}
  \begin{thmlist}
    \item
    \?
      x âˆª âˆ… = x
    \?
    \item
    \?
      x âˆ© âˆ… = âˆ…
    \?
    \item
    \?
      x âˆª ğ” = ğ”
    \?
    \item
    \?
      x âˆ© ğ” = x
    \?
  \end{thmlist}
  \tcblower
  \begin{thmlist}
    \item
    \?
      x âˆª âˆ…
      &{}= \cls{u}{u âˆˆ x âˆ¨ u âˆˆ âˆ…} \\
      &{}= \cls{u}{u âˆˆ x âˆ¨ u â‰  u} \\
      &{}= \cls{u}{u âˆˆ x} \\
      &{}= x
    \?
    \item
    \?
      x âˆ© âˆ…
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ âˆ…} \\
      &{}= \cls{u}{u âˆˆ x âˆ§ u â‰  u} \\
      &{}= \cls{u}{u â‰  u} \\
      &{}= âˆ…
    \?
    \item
    \?
      x âˆª ğ”
      &{}= \cls{u}{u âˆˆ x âˆ¨ u âˆˆ ğ”} \\
      &{}= \cls{u}{u âˆˆ x âˆ¨ u = u} \\
      &{}= \cls{u}{u = u} \\
      &{}= ğ”
    \?
    \item
    \?
      x âˆ© ğ”
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ ğ”} \\
      &{}= \cls{u}{u âˆˆ x âˆ§ u = u} \\
      &{}= \cls{u}{u âˆˆ x} \\
      &{}= x
    \?
  \end{thmlist}
\end{prp}


\begin{prp}
  \begin{thmlist}
    \item
    \?
      (x^âˆ)^âˆ = x
    \?
    \item
    \?
      x âˆª x^âˆ = ğ”
    \?
    \item
    \?
      x âˆ© x^âˆ = âˆ…
    \?
    \item
    \?
      ğ” âˆ– x = x^âˆ
    \?
    \item
    \?
      x âˆ– y = x âˆ© y^âˆ
    \?
    \item
    \?
      x âŠ† y \lra y^âˆ âŠ† x^âˆ
    \?
    \item
    \?
      x âŠ‚ y \lra y^âˆ âŠ‚ x^âˆ
    \?
  \end{thmlist}
  \tcblower
  \begin{thmlist}
    \item
    \?
      (x^âˆ)^âˆ
      &{}= \cls{u}{u âˆ‰ x^âˆ} \\
      &{}= \cls{u}{Â¬ (u âˆ‰ x)} \\
      &{}= \cls{u}{u âˆˆ x} \\
      &{}= x
    \?
    \item
    \?
      x âˆª x^âˆ
      &{}= \cls{u}{u âˆˆ x âˆ¨ u âˆˆ x^âˆ} \\
      &{}= \cls{u}{u âˆˆ x âˆ¨ u âˆ‰ x} \\
      &{}= \cls{u}{u = u} \\
      &{}= ğ”
    \?
    \item
    \?
      x âˆ© x^âˆ
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ x^âˆ} \\
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆ‰ x} \\
      &{}= \cls{u}{u â‰  u} \\
      &{}= âˆ…
    \?
    \item
    \?
      ğ” âˆ– x
      &{}= \cls{u}{u âˆˆ ğ” âˆ§ u âˆ‰ x} \\
      &{}= \cls{u}{x = x âˆ§ u âˆ‰ x} \\
      &{}= \cls{u}{u âˆ‰ x} \\
      &{}= x^âˆ
    \?
    \item
    \?
      x âˆ– y
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆ‰ y} \\
      &{}= \cls{u}{u âˆˆ x âˆ§ u âˆˆ y^âˆ} \\
      &{}= x âˆ© y^âˆ
    \?
    % \item Assume \rx{(A1) $x âŠ† y$}.\\
    % By (A1), $u âˆˆ x \ra u âˆˆ y$. Thus,
    % \begin{eqalign}
    %   u âˆˆ y^âˆ
    %   &{}\ra u âˆ‰ y âˆ§ \M{u} \\
    %   &{}\ra u âˆ‰ x âˆ§ \M{u} \\
    %   &{}\ra u âˆˆ x^âˆ
    % \end{eqalign}
    % \Release{A1}
    % \item Assume \rx{(A1) $x âŠ‚ y$}.\\
    % By (A1), (P1) $u âˆˆ x \ra u âˆˆ y$ and $x â‰  y$. Thus,
    % \begin{eqalign}
    %   u âˆˆ x
    %   &{}\ra u âˆ‰
    % \end{eqalign}
  \end{thmlist}
\end{prp}


\begin{prp}
  \begin{thmlist}
    \item
    \?
      (x âˆª y)^âˆ = x^âˆ âˆ© y^âˆ
    \?
    \item
    \?
      (x âˆ© y)^âˆ = x^âˆ âˆª y^âˆ
    \?
  \end{thmlist}
\end{prp}
