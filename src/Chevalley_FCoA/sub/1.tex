\chapter{Monoids}

\begin{description}[style=nextline]
  \item[1.1 Definition of a monoid] 
  \hyperref[dfn_Assoc]{結合的}かつ\hyperref[dfn_Neut]{中立元}を持つ→\hyperref[dfn_Monoid]{モノイド}．
  \hyperref[thm_genAssoc]{一般結合定理}．
  \hyperref[dfn_CommMonoid]{可換モノイド}と\hyperref[thm_genComm]{一般可換定理}．
  \item[1.2 Submonoids. Generators] 
  …
\end{description}


\section{Definition of a monoid}


\begin{cnv}
  \begin{thmlist}
    \item \Syn{$⊤$}
    \[
      + \AND ·
    \]
    \item \Syn{$⊤ (a, b)$}
    \[
      a \T b
    \]
    \item \Syn{$a · b$}
    \[
      ab
    \]
  \end{thmlist}
\end{cnv}


\begin{dfn}[dfn_uds][$\uds ⊤$][Underlying set]
  \[
    \uds ⊤
    ≔
    \img{\dom ⊤}
  \]
\end{dfn}
\begin{nb}
  \[
    (⊤ \： A × A → A)
    \ra
    \uds ⊤ = A
  \]
\end{nb}


% \begin{dfn}[dfn_LawComp][$\LawComp{⊤}$][$⊤$ is an (internal) law of composition]
%   \[
%     \LawComp{⊤}
%     \defn
%     ∃ A \ (⊤ \： A × A → A)
%   \]
% \end{dfn}
% \begin{nb}
%   \[
%     (⊤ \： A × A → A)
%     \lra
%     \cuc{
%       \LawComp{⊤} \\
%       \uds ⊤ = A
%     }
%   \]
% \end{nb}


\begin{dfn}[dfn_Assoc][$\Assoc{⊤; A}$][$⊤$ on $A$ is associative]
  \[
    \Assoc{⊤; A}
    \defn
    \cuc{
      ⊤ \： A × A → A \\
      ∀ a, b, c ∈ A \ ((a \T b) \T c = a \T (b \T c))
    }
  \]
  % \See{dfn_LawComp, dfn_uds}
  \tcblower
  \footnote{$⊤_{+_ℤ} ≔ \cls{ ⟨ ⟨ x, y ⟩, x +_ℤ y ⟩ }{ x, y ∈ ℤ }$ etc.}
  \footnote{$⊤_{∘, S} ≔ \cls{ ⟨ ⟨ f, g ⟩, g ∘ f ⟩ }{ f, g ∈ \funcs{S}{S} }$}
  \begin{thmlist}
    \item 
    \?
      \Assoc{⊤_{+_ℤ}; ℤ}
    \?
    \item 
    \?
      \Assoc{⊤_{·_ℤ}; ℤ}
    \?
    \item 
    \?
      \Assoc{⊤_{∘, S}; \funcs{S}{S}}
    \?
    \item 
    \?
      ¬ \Assoc{⊤_{-_ℤ}; ℤ}
    \?
  \end{thmlist}
\end{dfn}


\begin{dfn}[dfn_Neut][$\Neut{e; ⊤, A}$][$e$ is a neutral element for $⊤$ in $A$]
  \[
    \Neut{e; ⊤, A}
    \defn
    \cuc{
      ⊤ \： A × A → A \\
      e ∈ A \\
      ∀ a ∈ A \ (a \T e = e \T a = a)
    }
  \]
  % \See{dfn_LawComp, dfn_uds}
  \tcblower
  \begin{thmlist}
    \item 
    \?
      \Neut{0_{ℤ}; ⊤_{+_ℤ}, ℤ}
    \?
    \item 
    \?
      \Neut{1_{ℤ}; ⊤_{·_ℤ}, ℤ}
    \?
    \item 
    \?
      \Neut{\id_S; ⊤_{∘, S}}
    \?
    \item 
    \?
      ∀ x ∈ ℤ \ ¬ \Neut{x; ⊤_{-_ℤ}, ℤ}
    \?
  \end{thmlist}
\end{dfn}


\begin{thm}[thm_neut_unq][][Uniqueness of neutral element]
  \[
    ! e \ \Neut{e; ⊤, A}
  \]
  % \See{dfn_Neut}
  \tcblower
  Assume $\Neut{e_𝟏; ⊤, A}$ and $\Neut{e_𝟐; ⊤, A}$. Then, by \cref{dfn_Neut},
  \begin{eqgather}
    e_𝟏, e_𝟐 ∈ A \\
    ∀ a ∈ A \ (e_𝟏 \T a = a) \\
    ∀ a ∈ A \ (a \T e_𝟐 = a)
  \end{eqgather}
  Thus, $e_𝟏 = e_𝟏 \T e_𝟐 = e_𝟐$.
\end{thm}


\begin{dfn}[dfn_neut][$e_{⊤, A}$][Neutral element for $⊤$ in $A$]
  Define $e_⊤$ as $e$ in \cref{thm_neut_unq}:
  \begin{eqalign}
    ∃ e \ \Neut{e; ⊤, A} &{}\ra \Neut{e_{⊤, A}; ⊤, A} \\
    \otw &{}\ra e_{⊤, A} = 𝐔
  \end{eqalign}
  % \See{dfn_Neut}
\end{dfn}


\begin{cnv}
  \begin{thmlist}
    \item \Syn{$e_{+, \uds +}$}
    \[
      𝟶
    \]
    \item \Syn{$e_{·, \uds ·}$}
    \[
      𝟷
    \]
  \end{thmlist}
\end{cnv}


\begin{dfn}[dfn_Monoid][$\Monoid{A; ⊤}$][$A$ is a monoid for $⊤$]
  \[
    \Monoid{A; ⊤}
    \defn
    \cuc{
      \Assoc{⊤; A} \\
      ∃ e \ \Neut{e; ⊤, A}
    }
  \]
  % \See{dfn_Assoc, dfn_uds, dfn_Neut}
\end{dfn}
\begin{nb}
  \begin{eqalign}
    \Monoid{A; ⊤}
    &{}\lra
    \cuc{
      ⊤ \： A × A → A \\
      ∀ a, b, c ∈ A \ ((a \T b) \T c = a \T (b \T c)) \\
      e_{⊤, A} ∈ A \\
      ∀ a ∈ A \ (a \T e_{⊤, A} = e_{⊤, A} \T a = a)
    } \\
    &{}\lra
    \cuc{
      \Monoid{\uds ⊤; ⊤} \\
      A = \uds ⊤
    }
  \end{eqalign}
\end{nb}


\begin{prp}[thm_compSeq]
  \[
    \cuc{
      \Monoid{\uds ⊤; ⊤} \\
      n ∈ 𝜔 \\
      a \： [1, n] → \uds ⊤
    }
    \ra
    ∃! F \： [0, n] → \uds ⊤ \ 
    \cuc{
      F (0) = e_{⊤, \uds ⊤} \\
      ∀ m ∈ [0, n^-] \ F (m^+) = F (m) \T a_{m^+}
    }
  \]
  % \See{dfn_LawComp, dfn_uds, dfn_neut}
  \tcblower
  (Prove by Induction)
  \begin{step}
    \item Assume (A1) $\Monoid{\uds ⊤; ⊤}$ and (A2) $a \： [1, 0] → \uds ⊤$.\\
    By $m ∉ [0, 0^-]$, (P1) $∀ m ∈ [0, 0^-] \ F (m^+) = F (m) \T a_{m^+}$.\\
    Let us prove
    \[
      ∃! F \： [0, n] → \uds ⊤ \ 
      \cuc{
        F (0) = e_{⊤, \uds ⊤} \\
        ∀ m ∈ [0, n^-] \ F (m^+) = F (m) \T a_{m^+}
      }
    \]
    \begin{description}
      \item[Existence] Let $F = \{⟨ 0, e_{⊤, \uds ⊤} ⟩\}$. Then,
      \begin{step}
        \item By (A1), $e_{⊤, \uds ⊤} ∈ \uds ⊤$. Thus, $F \： [0, 0] → \uds ⊤$.
        \item $F (0) = e_{⊤, \uds ⊤}$.
      \end{step}
      Thus, by (P1),
      \[
        ∃ F \： [0, 0] → \uds ⊤ \ 
        \cuc{
          F (0) = e_{⊤, \uds ⊤} \\
          ∀ m ∈ [0, 0^-] \ F (m^+) = F (m) \T a_{m^+}
        }
      \]
      \item[Uniqueness] Assume such $F$ exists.\\
      By $F \： [0, n] → \uds ⊤$, $∃ x \ F = \{⟨ 0, x ⟩\}$. Take such $x$.\\
      Thus, $x = F (0) = e_{⊤, \uds ⊤}$.\\
      Thus, $F = \{⟨ 0, e_{⊤, \uds ⊤} ⟩\}$, which is unique.
    \end{description}
    \item Assume (A1)
    \[
      \cuc{
        \Monoid{\uds ⊤; ⊤} \\
        a \： [1, n] → \uds ⊤
      }
      \ra
      ∃! F \： [0, n] → \uds ⊤ \ 
      \cuc{
        F (0) = e_{⊤, \uds ⊤} \\
        ∀ m ∈ [0, n^-] \ F (m^+) = F (m) \T a_{m^+}
      }
    \]
    , (A2) $\Monoid{\uds ⊤; ⊤}$ and (A3) $a \： [1, n^+] → \uds ⊤$.\\
    Let $b = a ↾_{[1, n]}$. Then, $b \： [1, n] → \uds ⊤$.\\
    Thus, by (A1, A2),
    \[
      ∃! F \： [0, n] → \uds ⊤ \ 
      \cuc{
        F (0) = e_{⊤, \uds ⊤} \\
        ∀ m ∈ [0, n^-] \ F (m^+) = F (m) \T b_{m^+}
      }
    \]
    Take such unique $F$.\\
    Let $G = F ∪ \{⟨ n^+, F (n) \T a_{n^+} ⟩\}$. Then,
    \begin{step}
      \item $G (0) = F (0) = e_{⊤, \uds ⊤}$.
      \item Assume $m ∈ [0, n]$.\\
      If $m ∈ [0, n^-]$,
      \[
        G (m^+) = F (m^+) = F (m) \T a_{m^+} = G (m) \T a_{m^+}
      \]
      If $m = n$,
      \[
        G (m^+) = G (n^+) = F (n) \T a_{n^+} = G (n) \T a_{n^+}
      \]
    \end{step}
    Thus,
    \[
      \cuc{
        G \： [0, n^+] → \uds ⊤
        G (0) = e_{⊤, \uds ⊤} \\
        ∀ m ∈ [0, n] \ G (m^+) = G (m) \T a_{m^+}
      }
    \]
    Since $F$ is unique, $G$ is unique.\\
    Thus,
    \[
      ∃! F \： [0, n^+] → \uds ⊤ \ 
      \cuc{
        F (0) = e_{⊤, \uds ⊤} \\
        ∀ m ∈ [0, n] \ F (m^+) = F (m) \T a_{m^+}
      }
    \]
  \end{step}
\end{prp}


\begin{dfn}[dfn_compSeq][$⟙^n a$][Composite of a finite sequence]
  Define $⟙^n a$ as $F (n)$ in \cref{thm_compSeq}:
  \begin{eqalign}
    \cuc{
      \Monoid{\uds ⊤; ⊤} \\
      n ∈ 𝜔 \\
      a \： [1, n] → \uds ⊤
    }
    &{}\ra
    \cuc{
      ⟙ a \： [0, n] → \uds ⊤ \\
      ⟙^0 a = e_{⊤, \uds ⊤} \\
      ∀ m ∈ [0, n^-] \ ⟙^{m^+} a = \pr{ ⟙^m a } \T a_{m^+}
    } \\
    \otw &{}\ra ⟙ a = 𝐔
  \end{eqalign}
  % \See{dfn_LawComp, dfn_uds, dfn_neut}
  \tcblower
  Let $s = \{⟨ 1, a ⟩, ⟨ 2, b ⟩, ⟨ 3, c ⟩, ⟨ 4, d ⟩\}$. Assume $a, b, c, d ∈ A$ and $\Monoid{A; ⊤}$. Then, $\Monoid{\uds ⊤; ⊤}$ and $s \： [1, 4] → \uds ⊤$. Thus,
  \begin{thmlist}
    \item 
    \?
      ⟙^1 s = \pr{⟙^0 s} \T s_1 = e_{⊤, \uds ⊤} \T a = a
    \?
    \item 
    \?
      ⟙^3 s = \pr{⟙^2 s} \T s_3 = \pr{\pr{⟙^1 s} \T s_2} \T s_3 = (a \T b) \T c
    \?
    \item 
    \?
      ⟙^4 s = \pr{⟙^3 s} \T s_4 = ((a \T b) \T c) \T d
    \?
  \end{thmlist}
\end{dfn}


\begin{dfn}[dfn_CompSeqMN][$⟙_{i = m}^n 𝜏$]
  \[
    ⟙_{i = m}^{n} 𝜏
    ≔
    ⟙^{n - m + 1} \cls{ ⟨ i, 𝜏 [i + m - 1 / i] ⟩ }{ i ∈ [1, n - m + 1] }
  \]
\end{dfn}
\begin{nb}
  \[
    \cuc{
      \Monoid{A; ⊤} \\
      n ∈ 𝜔 \ 
      a \： [1, n] → A
    }
    \ra
    ⟙_{i = 1}^n a_i = ⟙^n a
  \]
\end{nb}


\begin{cnv}
  \begin{thmlist}
    \item \Syn{$\bigplus_{i = m}^n a_i$}
    \[
      ∑_{i = m}^n a_i
    \]
    \item \Syn{$\bigcdot_{i = m}^n a_i$}
    \[
      ∏_{i = m}^n a_i
    \]
  \end{thmlist}
\end{cnv}


\begin{thm}[thm_genAssoc][][General associativity theorem]
  \[
    \cuc{
      \Monoid{A; ⊤} \\
      n ∈ 𝜔, \ 
      a \： [1, n] → A \\
      h ∈ 𝜔, \ 
      k \： [1, h^+] → 𝜔 \\
      k_1 = 1, \ 
      k_{h^+} = n^+ \\
      ∀ m ∈ [1, h] \ ( k_m ≤ k_{m^+} )
    }
    \ra
    ⟙_{i = 1}^n a_i = ⟙_{i = 1}^h ⟙_{j = k_i}^{k_{i^+} - 1} a_j
  \]
  \tcblower
\end{thm}


\begin{dfn}[dfn_pow][$a^{n, ⊤}$]
  \[
    a^{n, ⊤}
    ≔
    ⟙_{i = 1}^n a
  \]
\end{dfn}


\begin{cnv}
  \begin{thmlist}
    \item \Syn{$a^{n, +}$}
    \[
      n a
    \]
    \item \Syn{$a^{n, ·}$}
    \[
      a^n
    \]
  \end{thmlist}
\end{cnv}


\begin{thm}
  \?
    \cuc{
      \Monoid{A; ⊤} \\
      a ∈ A \\
      0 ≠ m, n ∈ 𝜔
    }
    \ra
  \?
  \begin{thmlist}
    \item 
    \?
      a^{0, ⊤} = e_{⊤, A}
    \?
    \item 
    \?
      a^{1, ⊤} = a
    \?
    \item 
    \?
      a^{m + n, ⊤} = a^{m, ⊤} \T a^{n, ⊤}
    \?
    \item 
    \?
      a^{m · n, ⊤} = (a^{m, ⊤})^{n, ⊤}
    \?
  \end{thmlist}
  \tcblower
  % \begin{thmlist}
  %   \item By \cref{dfn_pow}
  %   % \[
  %   %   a^{0, ⊤} = ⟙_{i = 1}^0 a_i = ⟙^0 a_i = 
  %   % \]
  % \end{thmlist}
\end{thm}
\begin{nb}
  \begin{thmlist}
    \item 
    \?
      0 a = 𝟶, \quad
      a^0 = 𝟷
    \?
    \item 
    \?
      1 a = a, \quad
      a^1 = a
    \?
    \item 
    \?
      (m + n) a = m a + n a, \quad
      a^{m + n} = a^m  a^n
    \?
    \item 
    \?
      (m · n) a = m (n a), \quad
      a^{m · n} = (a^m)^n
    \?
  \end{thmlist}
\end{nb}

\begin{dfn}[dfn_CommMonoid][$\CommMonoid{A; ⊤}$][$A$ is a [commutative/Abelian] monoid]
  \[
    \CommMonoid{A; ⊤}
    \defn
    \cuc{
      \Monoid{A; ⊤} \\
      ∀ a, b ∈ A \ (a \T b = b \T a)
    }
  \]
  % \See{dfn_Monoid}
  \tcblower
  \begin{thmlist}
    \item 
    \?
      \CommMonoid{ℤ; ⊤_{+_ℤ}}
    \?
    \item 
    \?
      \CommMonoid{ℤ; ⊤_{·_ℤ}}
    \?
    \item 
    \?
      ¬ \CommMonoid{\funcs{ℝ}{ℝ}; ⊤_{∘, ℝ}}
    \?
  \end{thmlist}
\end{dfn}
\begin{nb}
  \[
    \CommMonoid{A; ⊤}
    \lra
    \cuc{
      ⊤ \： A × A → A \\
      ∀ a, b, c ∈ A \ ((a \T b) \T c = a \T (b \T c)) \\
      e_{⊤, A} ∈ A \\
      ∀ a ∈ A \ (a \T e_{⊤, A} = e_{⊤, A} \T a = a) \\
      ∀ a, b ∈ A \ (a \T b = b \T a)
    }
  \]
\end{nb}


\begin{thm}[thm_genComm][][General commutativity theorem]
  \[
    \cuc{
      \CommMonoid{A; ⊤} \\
      n ∈ 𝜔, \ 
      a \： [1, n] → A \\
      𝜛 \： [1, n] ⇄ [1, n]
    }
    \ra
    ⟙_{i = 1}^n a_i = ⟙_{i = 1}^n a_{𝜛 (i)}
  \]
\end{thm}


% \section{Submonoids. Generators}


% \begin{dfn}[dfn_Stable][$\Stable{B; A}$][$B$ is stable]
%   \[
%     \Stable{B; A}
%     \defn
%     \cuc{
%       B ⊆ A \\
%       ∀ a, b ∈ B \ (a \T b ∈ B)
%     }
%   \]
% \end{dfn}


% \begin{dfn}[dfn_indComp][$⊤_B$][Induced law of composition]
%   \[
%     ⊤_B ≔ ⊤ ↾_{B × B}
%   \]
% \end{dfn}


% \begin{prp}
%   \begin{thmlist}
%     \item 
%     \?
%       \Assoc{⊤} \ra \Assoc{⊤_B}
%     \?
%     \item 
%   \end{thmlist}
% \end{prp}
