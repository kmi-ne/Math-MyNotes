\chapter{Monoids}

\begin{description}[style=nextline]
  \item[1.1 Definition of a monoid] 
  \hyperref[dfn_Assoc]{çµåˆçš„}ã‹ã¤\hyperref[dfn_Neut]{ä¸­ç«‹å…ƒ}ã‚’æŒã¤â†’\hyperref[dfn_Monoid]{ãƒ¢ãƒã‚¤ãƒ‰}ï¼
  \hyperref[thm_genAssoc]{ä¸€èˆ¬çµåˆå®šç†}ï¼
  \hyperref[dfn_CommMonoid]{å¯æ›ãƒ¢ãƒã‚¤ãƒ‰}ã¨\hyperref[thm_genComm]{ä¸€èˆ¬å¯æ›å®šç†}ï¼
  \item[1.2 Submonoids. Generators] 
  â€¦
\end{description}


\section{Definition of a monoid}


\begin{cnv}
  \begin{thmlist}
    \item \Syn{$âŠ¤$}
    \[
      + \AND Â·
    \]
    \item \Syn{$âŠ¤ (a, b)$}
    \[
      a \T b
    \]
    \item \Syn{$a Â· b$}
    \[
      ab
    \]
  \end{thmlist}
\end{cnv}


\begin{dfn}[dfn_uds][$\uds âŠ¤$][Underlying set]
  \[
    \uds âŠ¤
    â‰”
    \img{\dom âŠ¤}
  \]
\end{dfn}
\begin{nb}
  \[
    (âŠ¤ \ï¼š A Ã— A â†’ A)
    \ra
    \uds âŠ¤ = A
  \]
\end{nb}


% \begin{dfn}[dfn_LawComp][$\LawComp{âŠ¤}$][$âŠ¤$ is an (internal) law of composition]
%   \[
%     \LawComp{âŠ¤}
%     \defn
%     âˆƒ A \ (âŠ¤ \ï¼š A Ã— A â†’ A)
%   \]
% \end{dfn}
% \begin{nb}
%   \[
%     (âŠ¤ \ï¼š A Ã— A â†’ A)
%     \lra
%     \cuc{
%       \LawComp{âŠ¤} \\
%       \uds âŠ¤ = A
%     }
%   \]
% \end{nb}


\begin{dfn}[dfn_Assoc][$\Assoc{âŠ¤; A}$][$âŠ¤$ on $A$ is associative]
  \[
    \Assoc{âŠ¤; A}
    \defn
    \cuc{
      âŠ¤ \ï¼š A Ã— A â†’ A \\
      âˆ€ a, b, c âˆˆ A \ ((a \T b) \T c = a \T (b \T c))
    }
  \]
  % \See{dfn_LawComp, dfn_uds}
  \tcblower
  \footnote{$âŠ¤_{+_â„¤} â‰” \cls{ âŸ¨ âŸ¨ x, y âŸ©, x +_â„¤ y âŸ© }{ x, y âˆˆ â„¤ }$ etc.}
  \footnote{$âŠ¤_{âˆ˜, S} â‰” \cls{ âŸ¨ âŸ¨ f, g âŸ©, g âˆ˜ f âŸ© }{ f, g âˆˆ \funcs{S}{S} }$}
  \begin{thmlist}
    \item 
    \?
      \Assoc{âŠ¤_{+_â„¤}; â„¤}
    \?
    \item 
    \?
      \Assoc{âŠ¤_{Â·_â„¤}; â„¤}
    \?
    \item 
    \?
      \Assoc{âŠ¤_{âˆ˜, S}; \funcs{S}{S}}
    \?
    \item 
    \?
      Â¬ \Assoc{âŠ¤_{-_â„¤}; â„¤}
    \?
  \end{thmlist}
\end{dfn}


\begin{dfn}[dfn_Neut][$\Neut{e; âŠ¤, A}$][$e$ is a neutral element for $âŠ¤$ in $A$]
  \[
    \Neut{e; âŠ¤, A}
    \defn
    \cuc{
      âŠ¤ \ï¼š A Ã— A â†’ A \\
      e âˆˆ A \\
      âˆ€ a âˆˆ A \ (a \T e = e \T a = a)
    }
  \]
  % \See{dfn_LawComp, dfn_uds}
  \tcblower
  \begin{thmlist}
    \item 
    \?
      \Neut{0_{â„¤}; âŠ¤_{+_â„¤}, â„¤}
    \?
    \item 
    \?
      \Neut{1_{â„¤}; âŠ¤_{Â·_â„¤}, â„¤}
    \?
    \item 
    \?
      \Neut{\id_S; âŠ¤_{âˆ˜, S}}
    \?
    \item 
    \?
      âˆ€ x âˆˆ â„¤ \ Â¬ \Neut{x; âŠ¤_{-_â„¤}, â„¤}
    \?
  \end{thmlist}
\end{dfn}


\begin{thm}[thm_neut_unq][][Uniqueness of neutral element]
  \[
    ! e \ \Neut{e; âŠ¤, A}
  \]
  % \See{dfn_Neut}
  \tcblower
  Assume $\Neut{e_ğŸ; âŠ¤, A}$ and $\Neut{e_ğŸ; âŠ¤, A}$. Then, by \cref{dfn_Neut},
  \begin{eqgather}
    e_ğŸ, e_ğŸ âˆˆ A \\
    âˆ€ a âˆˆ A \ (e_ğŸ \T a = a) \\
    âˆ€ a âˆˆ A \ (a \T e_ğŸ = a)
  \end{eqgather}
  Thus, $e_ğŸ = e_ğŸ \T e_ğŸ = e_ğŸ$.
\end{thm}


\begin{dfn}[dfn_neut][$e_{âŠ¤, A}$][Neutral element for $âŠ¤$ in $A$]
  Define $e_âŠ¤$ as $e$ in \cref{thm_neut_unq}:
  \begin{eqalign}
    âˆƒ e \ \Neut{e; âŠ¤, A} &{}\ra \Neut{e_{âŠ¤, A}; âŠ¤, A} \\
    \otw &{}\ra e_{âŠ¤, A} = ğ”
  \end{eqalign}
  % \See{dfn_Neut}
\end{dfn}


\begin{cnv}
  \begin{thmlist}
    \item \Syn{$e_{+, \uds +}$}
    \[
      ğŸ¶
    \]
    \item \Syn{$e_{Â·, \uds Â·}$}
    \[
      ğŸ·
    \]
  \end{thmlist}
\end{cnv}


\begin{dfn}[dfn_Monoid][$\Monoid{A; âŠ¤}$][$A$ is a monoid for $âŠ¤$]
  \[
    \Monoid{A; âŠ¤}
    \defn
    \cuc{
      \Assoc{âŠ¤; A} \\
      âˆƒ e \ \Neut{e; âŠ¤, A}
    }
  \]
  % \See{dfn_Assoc, dfn_uds, dfn_Neut}
\end{dfn}
\begin{nb}
  \begin{eqalign}
    \Monoid{A; âŠ¤}
    &{}\lra
    \cuc{
      âŠ¤ \ï¼š A Ã— A â†’ A \\
      âˆ€ a, b, c âˆˆ A \ ((a \T b) \T c = a \T (b \T c)) \\
      e_{âŠ¤, A} âˆˆ A \\
      âˆ€ a âˆˆ A \ (a \T e_{âŠ¤, A} = e_{âŠ¤, A} \T a = a)
    } \\
    &{}\lra
    \cuc{
      \Monoid{\uds âŠ¤; âŠ¤} \\
      A = \uds âŠ¤
    }
  \end{eqalign}
\end{nb}


\begin{prp}[thm_compSeq]
  \[
    \cuc{
      \Monoid{\uds âŠ¤; âŠ¤} \\
      n âˆˆ ğœ” \\
      a \ï¼š [1, n] â†’ \uds âŠ¤
    }
    \ra
    âˆƒ! F \ï¼š [0, n] â†’ \uds âŠ¤ \ 
    \cuc{
      F (0) = e_{âŠ¤, \uds âŠ¤} \\
      âˆ€ m âˆˆ [0, n^-] \ F (m^+) = F (m) \T a_{m^+}
    }
  \]
  % \See{dfn_LawComp, dfn_uds, dfn_neut}
  \tcblower
  (Prove by Induction)
  \begin{step}
    \item Assume (A1) $\Monoid{\uds âŠ¤; âŠ¤}$ and (A2) $a \ï¼š [1, 0] â†’ \uds âŠ¤$.\\
    By $m âˆ‰ [0, 0^-]$, (P1) $âˆ€ m âˆˆ [0, 0^-] \ F (m^+) = F (m) \T a_{m^+}$.\\
    Let us prove
    \[
      âˆƒ! F \ï¼š [0, n] â†’ \uds âŠ¤ \ 
      \cuc{
        F (0) = e_{âŠ¤, \uds âŠ¤} \\
        âˆ€ m âˆˆ [0, n^-] \ F (m^+) = F (m) \T a_{m^+}
      }
    \]
    \begin{description}
      \item[Existence] Let $F = \{âŸ¨ 0, e_{âŠ¤, \uds âŠ¤} âŸ©\}$. Then,
      \begin{step}
        \item By (A1), $e_{âŠ¤, \uds âŠ¤} âˆˆ \uds âŠ¤$. Thus, $F \ï¼š [0, 0] â†’ \uds âŠ¤$.
        \item $F (0) = e_{âŠ¤, \uds âŠ¤}$.
      \end{step}
      Thus, by (P1),
      \[
        âˆƒ F \ï¼š [0, 0] â†’ \uds âŠ¤ \ 
        \cuc{
          F (0) = e_{âŠ¤, \uds âŠ¤} \\
          âˆ€ m âˆˆ [0, 0^-] \ F (m^+) = F (m) \T a_{m^+}
        }
      \]
      \item[Uniqueness] Assume such $F$ exists.\\
      By $F \ï¼š [0, n] â†’ \uds âŠ¤$, $âˆƒ x \ F = \{âŸ¨ 0, x âŸ©\}$. Take such $x$.\\
      Thus, $x = F (0) = e_{âŠ¤, \uds âŠ¤}$.\\
      Thus, $F = \{âŸ¨ 0, e_{âŠ¤, \uds âŠ¤} âŸ©\}$, which is unique.
    \end{description}
    \item Assume (A1)
    \[
      \cuc{
        \Monoid{\uds âŠ¤; âŠ¤} \\
        a \ï¼š [1, n] â†’ \uds âŠ¤
      }
      \ra
      âˆƒ! F \ï¼š [0, n] â†’ \uds âŠ¤ \ 
      \cuc{
        F (0) = e_{âŠ¤, \uds âŠ¤} \\
        âˆ€ m âˆˆ [0, n^-] \ F (m^+) = F (m) \T a_{m^+}
      }
    \]
    , (A2) $\Monoid{\uds âŠ¤; âŠ¤}$ and (A3) $a \ï¼š [1, n^+] â†’ \uds âŠ¤$.\\
    Let $b = a â†¾_{[1, n]}$. Then, $b \ï¼š [1, n] â†’ \uds âŠ¤$.\\
    Thus, by (A1, A2),
    \[
      âˆƒ! F \ï¼š [0, n] â†’ \uds âŠ¤ \ 
      \cuc{
        F (0) = e_{âŠ¤, \uds âŠ¤} \\
        âˆ€ m âˆˆ [0, n^-] \ F (m^+) = F (m) \T b_{m^+}
      }
    \]
    Take such unique $F$.\\
    Let $G = F âˆª \{âŸ¨ n^+, F (n) \T a_{n^+} âŸ©\}$. Then,
    \begin{step}
      \item $G (0) = F (0) = e_{âŠ¤, \uds âŠ¤}$.
      \item Assume $m âˆˆ [0, n]$.\\
      If $m âˆˆ [0, n^-]$,
      \[
        G (m^+) = F (m^+) = F (m) \T a_{m^+} = G (m) \T a_{m^+}
      \]
      If $m = n$,
      \[
        G (m^+) = G (n^+) = F (n) \T a_{n^+} = G (n) \T a_{n^+}
      \]
    \end{step}
    Thus,
    \[
      \cuc{
        G \ï¼š [0, n^+] â†’ \uds âŠ¤
        G (0) = e_{âŠ¤, \uds âŠ¤} \\
        âˆ€ m âˆˆ [0, n] \ G (m^+) = G (m) \T a_{m^+}
      }
    \]
    Since $F$ is unique, $G$ is unique.\\
    Thus,
    \[
      âˆƒ! F \ï¼š [0, n^+] â†’ \uds âŠ¤ \ 
      \cuc{
        F (0) = e_{âŠ¤, \uds âŠ¤} \\
        âˆ€ m âˆˆ [0, n] \ F (m^+) = F (m) \T a_{m^+}
      }
    \]
  \end{step}
\end{prp}


\begin{dfn}[dfn_compSeq][$âŸ™^n a$][Composite of a finite sequence]
  Define $âŸ™^n a$ as $F (n)$ in \cref{thm_compSeq}:
  \begin{eqalign}
    \cuc{
      \Monoid{\uds âŠ¤; âŠ¤} \\
      n âˆˆ ğœ” \\
      a \ï¼š [1, n] â†’ \uds âŠ¤
    }
    &{}\ra
    \cuc{
      âŸ™ a \ï¼š [0, n] â†’ \uds âŠ¤ \\
      âŸ™^0 a = e_{âŠ¤, \uds âŠ¤} \\
      âˆ€ m âˆˆ [0, n^-] \ âŸ™^{m^+} a = \pr{ âŸ™^m a } \T a_{m^+}
    } \\
    \otw &{}\ra âŸ™ a = ğ”
  \end{eqalign}
  % \See{dfn_LawComp, dfn_uds, dfn_neut}
  \tcblower
  Let $s = \{âŸ¨ 1, a âŸ©, âŸ¨ 2, b âŸ©, âŸ¨ 3, c âŸ©, âŸ¨ 4, d âŸ©\}$. Assume $a, b, c, d âˆˆ A$ and $\Monoid{A; âŠ¤}$. Then, $\Monoid{\uds âŠ¤; âŠ¤}$ and $s \ï¼š [1, 4] â†’ \uds âŠ¤$. Thus,
  \begin{thmlist}
    \item 
    \?
      âŸ™^1 s = \pr{âŸ™^0 s} \T s_1 = e_{âŠ¤, \uds âŠ¤} \T a = a
    \?
    \item 
    \?
      âŸ™^3 s = \pr{âŸ™^2 s} \T s_3 = \pr{\pr{âŸ™^1 s} \T s_2} \T s_3 = (a \T b) \T c
    \?
    \item 
    \?
      âŸ™^4 s = \pr{âŸ™^3 s} \T s_4 = ((a \T b) \T c) \T d
    \?
  \end{thmlist}
\end{dfn}


\begin{dfn}[dfn_CompSeqMN][$âŸ™_{i = m}^n ğœ$]
  \[
    âŸ™_{i = m}^{n} ğœ
    â‰”
    âŸ™^{n - m + 1} \cls{ âŸ¨ i, ğœ [i + m - 1 / i] âŸ© }{ i âˆˆ [1, n - m + 1] }
  \]
\end{dfn}
\begin{nb}
  \[
    \cuc{
      \Monoid{A; âŠ¤} \\
      n âˆˆ ğœ” \ 
      a \ï¼š [1, n] â†’ A
    }
    \ra
    âŸ™_{i = 1}^n a_i = âŸ™^n a
  \]
\end{nb}


\begin{cnv}
  \begin{thmlist}
    \item \Syn{$\bigplus_{i = m}^n a_i$}
    \[
      âˆ‘_{i = m}^n a_i
    \]
    \item \Syn{$\bigcdot_{i = m}^n a_i$}
    \[
      âˆ_{i = m}^n a_i
    \]
  \end{thmlist}
\end{cnv}


\begin{thm}[thm_genAssoc][][General associativity theorem]
  \[
    \cuc{
      \Monoid{A; âŠ¤} \\
      n âˆˆ ğœ”, \ 
      a \ï¼š [1, n] â†’ A \\
      h âˆˆ ğœ”, \ 
      k \ï¼š [1, h^+] â†’ ğœ” \\
      k_1 = 1, \ 
      k_{h^+} = n^+ \\
      âˆ€ m âˆˆ [1, h] \ ( k_m â‰¤ k_{m^+} )
    }
    \ra
    âŸ™_{i = 1}^n a_i = âŸ™_{i = 1}^h âŸ™_{j = k_i}^{k_{i^+} - 1} a_j
  \]
  \tcblower
\end{thm}


\begin{dfn}[dfn_pow][$a^{n, âŠ¤}$]
  \[
    a^{n, âŠ¤}
    â‰”
    âŸ™_{i = 1}^n a
  \]
\end{dfn}


\begin{cnv}
  \begin{thmlist}
    \item \Syn{$a^{n, +}$}
    \[
      n a
    \]
    \item \Syn{$a^{n, Â·}$}
    \[
      a^n
    \]
  \end{thmlist}
\end{cnv}


\begin{thm}
  \?
    \cuc{
      \Monoid{A; âŠ¤} \\
      a âˆˆ A \\
      0 â‰  m, n âˆˆ ğœ”
    }
    \ra
  \?
  \begin{thmlist}
    \item 
    \?
      a^{0, âŠ¤} = e_{âŠ¤, A}
    \?
    \item 
    \?
      a^{1, âŠ¤} = a
    \?
    \item 
    \?
      a^{m + n, âŠ¤} = a^{m, âŠ¤} \T a^{n, âŠ¤}
    \?
    \item 
    \?
      a^{m Â· n, âŠ¤} = (a^{m, âŠ¤})^{n, âŠ¤}
    \?
  \end{thmlist}
  \tcblower
  % \begin{thmlist}
  %   \item By \cref{dfn_pow}
  %   % \[
  %   %   a^{0, âŠ¤} = âŸ™_{i = 1}^0 a_i = âŸ™^0 a_i = 
  %   % \]
  % \end{thmlist}
\end{thm}
\begin{nb}
  \begin{thmlist}
    \item 
    \?
      0 a = ğŸ¶, \quad
      a^0 = ğŸ·
    \?
    \item 
    \?
      1 a = a, \quad
      a^1 = a
    \?
    \item 
    \?
      (m + n) a = m a + n a, \quad
      a^{m + n} = a^m  a^n
    \?
    \item 
    \?
      (m Â· n) a = m (n a), \quad
      a^{m Â· n} = (a^m)^n
    \?
  \end{thmlist}
\end{nb}

\begin{dfn}[dfn_CommMonoid][$\CommMonoid{A; âŠ¤}$][$A$ is a [commutative/Abelian] monoid]
  \[
    \CommMonoid{A; âŠ¤}
    \defn
    \cuc{
      \Monoid{A; âŠ¤} \\
      âˆ€ a, b âˆˆ A \ (a \T b = b \T a)
    }
  \]
  % \See{dfn_Monoid}
  \tcblower
  \begin{thmlist}
    \item 
    \?
      \CommMonoid{â„¤; âŠ¤_{+_â„¤}}
    \?
    \item 
    \?
      \CommMonoid{â„¤; âŠ¤_{Â·_â„¤}}
    \?
    \item 
    \?
      Â¬ \CommMonoid{\funcs{â„}{â„}; âŠ¤_{âˆ˜, â„}}
    \?
  \end{thmlist}
\end{dfn}
\begin{nb}
  \[
    \CommMonoid{A; âŠ¤}
    \lra
    \cuc{
      âŠ¤ \ï¼š A Ã— A â†’ A \\
      âˆ€ a, b, c âˆˆ A \ ((a \T b) \T c = a \T (b \T c)) \\
      e_{âŠ¤, A} âˆˆ A \\
      âˆ€ a âˆˆ A \ (a \T e_{âŠ¤, A} = e_{âŠ¤, A} \T a = a) \\
      âˆ€ a, b âˆˆ A \ (a \T b = b \T a)
    }
  \]
\end{nb}


\begin{thm}[thm_genComm][][General commutativity theorem]
  \[
    \cuc{
      \CommMonoid{A; âŠ¤} \\
      n âˆˆ ğœ”, \ 
      a \ï¼š [1, n] â†’ A \\
      ğœ› \ï¼š [1, n] â‡„ [1, n]
    }
    \ra
    âŸ™_{i = 1}^n a_i = âŸ™_{i = 1}^n a_{ğœ› (i)}
  \]
\end{thm}


% \section{Submonoids. Generators}


% \begin{dfn}[dfn_Stable][$\Stable{B; A}$][$B$ is stable]
%   \[
%     \Stable{B; A}
%     \defn
%     \cuc{
%       B âŠ† A \\
%       âˆ€ a, b âˆˆ B \ (a \T b âˆˆ B)
%     }
%   \]
% \end{dfn}


% \begin{dfn}[dfn_indComp][$âŠ¤_B$][Induced law of composition]
%   \[
%     âŠ¤_B â‰” âŠ¤ â†¾_{B Ã— B}
%   \]
% \end{dfn}


% \begin{prp}
%   \begin{thmlist}
%     \item 
%     \?
%       \Assoc{âŠ¤} \ra \Assoc{âŠ¤_B}
%     \?
%     \item 
%   \end{thmlist}
% \end{prp}
